import{br as k,a7 as $,s as A,aI as N,o as f,c as b,a5 as S,b3 as z,_ as o,B as m,bq as C,k as M,M as I,a4 as F,aG as D,H as x,I as H,a as V,b as q}from"./pinia.esm-browser.b39ed190.js";import{_ as Q,i as W,z as j}from"./QRToggle.2793eef2.js";import{u as R}from"./url.0afc5710.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";function y(s,e){return Math.floor(Math.random()*(e-s+1)+s)}function K(s,e,t=3){return parseFloat((Math.random()*(e-s)+s).toFixed(t))}function J(){const s=y(0,2*Math.PI),e=K(.5,1);return{transform:`rotate(${s}rad) scale(${e}) `,WebkitFilter:"drop-shadow(0 0 10px rgba(255, 255, 255, 5))",filter:"drop-shadow(0 0 10px rgba(255, 255, 255, 5))"}}const P=k({id:"how_many",state:()=>({cols:5,rows:5,cells:new Array,howManyQuestion:0}),actions:{checkAnswer(s){let e=0;for(const t of this.cells)this.howManyQuestion==t.index&&(e+=1);return e==s},randomize(s){const e=s.length;this.cells.splice(0,this.cells.length);for(let t=0;t<this.cols*this.rows;t++){const u=y(0,e-1);this.cells.push({index:u,selected:!1,style:J(),word:s[u]})}this.howManyQuestion=y(0,e-1)},setSettingsFromURLSearchParams(){const s=new URLSearchParams(window.location.search),e=s.get("rows");e&&(this.rows=Number.parseInt(e));const t=s.get("cols");t&&(this.cols=Number.parseInt(t))}}}),X="https://altivities.earthiverse.ca/wordlists/Plurals",Y={General:{prefix:`${X}/`,lists:{fruits:{name:"Fruits",wordList:"fruits.json"}}}},T=k({id:"word_list",state:()=>({wordLists:new Array,numWords:0}),getters:{curatedWordLists:()=>Y,getWordByIndex:s=>e=>{let t=0;for(const u of s.wordLists)for(const r of u){if(t==e)return r;t++}},words:s=>s.wordLists.flat()},actions:{async addWordsFromURLSearchParams(s="wordlist",e="wordlists",t="ignore",u="include"){const r=new URLSearchParams(window.location.search);let n=[];const i=r.get(s);if(i){const c=await(await fetch(i)).json();n.push(...c)}const h=r.get(e);if(h)for(const l of h.split(",")){const g=await(await fetch(l)).json();n.push(...g)}const a=r.get(t);if(a){const l=a.split(",");for(let c=0;c<n.length;c++){const g=n[c];for(const v of l)if(g.singular.en==v){n.splice(c,1),c-=1;break}}}const _=r.get(u);if(_){const l=_.split(","),c=[];for(;l.length>0;){const g=l.shift();for(const v of n)if(v.singular.en==g){c.push(v);break}}n=c}for(const l of n)l.id=this.numWords,this.numWords++;this.wordLists.push(n);let d=1,w=`${d}_wordlist`,p=`${d}_wordlists`;for(;r.has(w)||r.has(p);)this.addWordsFromURLSearchParams(w,p,`${d}_ignore`,`${d}_include`),d+=1,w=`${d}_wordlist`,p=`${d}_wordlists`;return this.words},resetStore(){this.wordLists.splice(0,this.wordLists.length),this.numWords=0}}});const Z=["onSubmit"],ss=F(" # Rows "),es=["value"],ts=F(" # Columns "),os=["value"],ns=o("input",{type:"submit",value:"Set"},null,-1),as=$({name:"HowManySettingsToggle",setup(s){let e=A(!1);const t=P(),u=T();function r(){const n=Number.parseInt(document.querySelector('input[name="rows"]').value),i=Number.parseInt(document.querySelector('input[name="cols"]').value);t.rows=n,t.cols=i,R("rows",n.toString()),R("cols",i.toString()),t.randomize(u.words),e.value=!1}return(n,i)=>{const h=N("vue-final-modal");return f(),b(I,null,[S(h,{modelValue:m(e),"onUpdate:modelValue":i[0]||(i[0]=a=>M(e)?e.value=a:e=a),classes:"modal-container","content-class":"modal-content"},{default:z(()=>[o("form",{class:"how-many-settings-form",onSubmit:C(r,["prevent"]),name:"type"},[ss,o("input",{type:"number",id:"rows",name:"rows",value:m(t).rows},null,8,es),ts,o("input",{type:"number",id:"cols",name:"cols",value:m(t).cols},null,8,os),ns],40,Z)]),_:1},8,["modelValue"]),o("span",{class:"material-symbols-outlined top-button settings-button",onClick:i[1]||(i[1]=a=>M(e)?e.value=!0:e=!0)},"settings")],64)}}});const rs={id:"maru_batsu_correct",class:"correct"},is=["src"],cs={id:"maru_batsu_incorrect",class:"incorrect"},us=["src"],B=["/assets/images/correct/bear.png","/assets/images/correct/cat.png","/assets/images/correct/dog.png","/assets/images/correct/man.png","/assets/images/correct/rabbit.png","/assets/images/correct/woman.png"],E=["/assets/images/incorrect/bear.png","/assets/images/incorrect/cat.png","/assets/images/incorrect/dog.png","/assets/images/incorrect/man.png","/assets/images/incorrect/rabbit.png","/assets/images/incorrect/woman.png"];let O=A(0),U=A(0);function ls(){const s=document.getElementById("maru_batsu_correct");s.classList.contains("fadeInAndOut")||(O.value=y(0,B.length-1),s.addEventListener("animationend",()=>{console.log("removing class"),s.classList.remove("fadeInAndOut")},!0),s.classList.add("fadeInAndOut"))}function ds(){const s=document.getElementById("maru_batsu_incorrect");s.classList.contains("fadeInAndOut")||(U.value=y(0,E.length-1),s.addEventListener("animationend",()=>{console.log("removing class"),s.classList.remove("fadeInAndOut")},!0),s.classList.add("fadeInAndOut"))}const ms=$({name:"MaruBatsuDisplay",setup(s){return(e,t)=>(f(),b(I,null,[o("div",rs,[o("img",{id:"maru_batsu_correct_img",src:B[m(O)]},null,8,is)]),o("div",cs,[o("img",{id:"maru_batsu_incorrect_img",src:E[m(U)]},null,8,us)])],64))}});var ps=G(ms,[["__scopeId","data-v-6b9eef00"]]);const _s={class:"top",style:{flexWrap:"wrap"}},hs=["onClick"],ws=["src"],gs={class:"bottom-menu"},fs=o("div",null,"How many",-1),bs={class:"text"},ys=o("div",null,"?",-1),vs=["onSubmit"],Ss=["max"],Is=o("input",{type:"submit",value:"Check!"},null,-1),Ls=$({name:"HowManyApp",setup(s){const e=T(),t=P();e.addWordsFromURLSearchParams().then(()=>{t.setSettingsFromURLSearchParams(),t.randomize(e.words)});const u={1:"/assets/audio/numbers/1.mp3",2:"/assets/audio/numbers/2.mp3",3:"/assets/audio/numbers/3.mp3",4:"/assets/audio/numbers/4.mp3",5:"/assets/audio/numbers/5.mp3",6:"/assets/audio/numbers/6.mp3",7:"/assets/audio/numbers/7.mp3",8:"/assets/audio/numbers/8.mp3",9:"/assets/audio/numbers/9.mp3",10:"/assets/audio/numbers/10.mp3",11:"/assets/audio/numbers/11.mp3",12:"/assets/audio/numbers/12.mp3",13:"/assets/audio/numbers/13.mp3",14:"/assets/audio/numbers/14.mp3",15:"/assets/audio/numbers/15.mp3",16:"/assets/audio/numbers/16.mp3",17:"/assets/audio/numbers/17.mp3",18:"/assets/audio/numbers/18.mp3",19:"/assets/audio/numbers/19.mp3",20:"/assets/audio/numbers/20.mp3",30:"/assets/audio/numbers/30.mp3",40:"/assets/audio/numbers/40.mp3",50:"/assets/audio/numbers/50.mp3",60:"/assets/audio/numbers/60.mp3",70:"/assets/audio/numbers/70.mp3",80:"/assets/audio/numbers/80.mp3",90:"/assets/audio/numbers/90.mp3"};function r(){return e.getWordByIndex(t.howManyQuestion)}let n=0;function i(a){if(a.selected)return;const _=t.howManyQuestion;a.index==_?(a.selected=!0,new Audio("/assets/audio/sfx/correct.mp3").play(),n+=1,u[n]&&new Audio(u[n]).play()):new Audio("/assets/audio/sfx/incorrect.mp3").play()}function h(){const a=document.querySelector('input[name="answer"]'),_=Number.parseInt(a.value);t.checkAnswer(_)?(new Audio("/assets/audio/sfx/complete.mp3").play(),ls(),setTimeout(()=>{a.value="",n=0,t.randomize(e.words)},2e3)):(new Audio("/assets/audio/sfx/incorrect.mp3").play(),ds())}return(a,_)=>{var d,w;return f(),b(I,null,[S(Q),S(as),S(ps),o("div",_s,[(f(!0),b(I,null,D(m(t).cells,(p,l)=>(f(),b("div",{class:"cell",key:l,style:x({height:`calc((100% / ${m(t).rows}))`,opacity:p.selected?.5:1,width:`calc((100% / ${m(t).cols}))`}),onClick:c=>i(p)},[o("img",{src:p.word.singular.image,style:x(p.style)},null,12,ws)],12,hs))),128))]),o("div",gs,[fs,o("div",{class:"card",style:x({backgroundImage:`url(${(d=r())==null?void 0:d.plural.image})`})},[o("span",bs,H((w=r())==null?void 0:w.plural.en),1)],4),ys,o("form",{class:"form",onSubmit:C(h,["prevent"])},[o("input",{type:"number",min:"0",name:"answer",placeholder:"__",required:"",max:m(t).cells.length},null,8,Ss),Is],40,vs)])],64)}}}),L=V(Ls);L.component(W.name,W);L.use(q());L.use(j);L.mount("#app");
