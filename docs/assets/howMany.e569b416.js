import{d as P,e as A,r as $,f as N,o as f,c as b,g as S,w as z,h as o,u as m,i as T,j as C,F as L,k as E,n as D,q as x,t as V,a as j,b as q}from"./pinia.esm-browser.11e879ee.js";import{_ as H,i as M,z as Q}from"./QRToggle.3a0754c7.js";import{a as G,r as y}from"./random.9fb4bc4f.js";import{u as k}from"./url.ba275dec.js";import{_ as K}from"./plugin-vue_export-helper.21dcd24c.js";const O=P({id:"how_many",state:()=>({cols:5,rows:5,cells:new Array,howManyQuestion:0}),actions:{checkAnswer(t){let e=0;for(const s of this.cells)this.howManyQuestion==s.index&&(e+=1);return e==t},randomize(t){const e=t.length;this.cells.splice(0,this.cells.length);for(let s=0;s<this.cols*this.rows;s++){const u=y(0,e-1);this.cells.push({index:u,selected:!1,style:G(),word:t[u]})}this.howManyQuestion=y(0,e-1)},setSettingsFromURLSearchParams(){const t=new URLSearchParams(window.location.search),e=t.get("rows");e&&(this.rows=Number.parseInt(e));const s=t.get("cols");s&&(this.cols=Number.parseInt(s))}}}),J="https://altivities.earthiverse.ca/wordlists/Plurals",X={General:{prefix:`${J}/`,lists:{fruits:{name:"Fruits",wordList:"fruits.json"}}}},U=P({id:"word_list",state:()=>({wordLists:new Array,numWords:0}),getters:{curatedWordLists:()=>X,getWordByIndex:t=>e=>{let s=0;for(const u of t.wordLists)for(const r of u){if(s==e)return r;s++}},words:t=>t.wordLists.flat()},actions:{async addWordsFromURLSearchParams(t="wordlist",e="wordlists",s="ignore",u="include"){const r=new URLSearchParams(window.location.search);let n=[];const i=r.get(t);if(i){const c=await(await fetch(i)).json();n.push(...c)}const h=r.get(e);if(h)for(const l of h.split(",")){const g=await(await fetch(l)).json();n.push(...g)}const a=r.get(s);if(a){const l=a.split(",");for(let c=0;c<n.length;c++){const g=n[c];for(const v of l)if(g.singular.en==v){n.splice(c,1),c-=1;break}}}const _=r.get(u);if(_){const l=_.split(","),c=[];for(;l.length>0;){const g=l.shift();for(const v of n)if(v.singular.en==g){c.push(v);break}}n=c}for(const l of n)l.id=this.numWords,this.numWords++;this.wordLists.push(n);let d=1,w=`${d}_wordlist`,p=`${d}_wordlists`;for(;r.has(w)||r.has(p);)this.addWordsFromURLSearchParams(w,p,`${d}_ignore`,`${d}_include`),d+=1,w=`${d}_wordlist`,p=`${d}_wordlists`;return this.words},resetStore(){this.wordLists.splice(0,this.wordLists.length),this.numWords=0}}});const Y=["onSubmit"],Z=E(" # Rows "),ss=["value"],es=E(" # Columns "),ts=["value"],os=o("input",{type:"submit",value:"Set"},null,-1),ns=A({name:"HowManySettingsToggle",setup(t){let e=$(!1);const s=O(),u=U();function r(){const n=Number.parseInt(document.querySelector('input[name="rows"]').value),i=Number.parseInt(document.querySelector('input[name="cols"]').value);s.rows=n,s.cols=i,k("rows",n.toString()),k("cols",i.toString()),s.randomize(u.words),e.value=!1}return(n,i)=>{const h=N("vue-final-modal");return f(),b(L,null,[S(h,{modelValue:m(e),"onUpdate:modelValue":i[0]||(i[0]=a=>C(e)?e.value=a:e=a),classes:"modal-container","content-class":"modal-content"},{default:z(()=>[o("form",{class:"how-many-settings-form",onSubmit:T(r,["prevent"]),name:"type"},[Z,o("input",{type:"number",id:"rows",name:"rows",value:m(s).rows},null,8,ss),es,o("input",{type:"number",id:"cols",name:"cols",value:m(s).cols},null,8,ts),os],40,Y)]),_:1},8,["modelValue"]),o("span",{class:"material-symbols-outlined button button-top button-left-2 settings-button",onClick:i[1]||(i[1]=a=>C(e)?e.value=!0:e=!0)},"settings")],64)}}});const as={id:"maru_batsu_correct",class:"correct"},rs=["src"],is={id:"maru_batsu_incorrect",class:"incorrect"},cs=["src"],B=["/assets/images/correct/bear.png","/assets/images/correct/cat.png","/assets/images/correct/dog.png","/assets/images/correct/man.png","/assets/images/correct/rabbit.png","/assets/images/correct/woman.png"],W=["/assets/images/incorrect/bear.png","/assets/images/incorrect/cat.png","/assets/images/incorrect/dog.png","/assets/images/incorrect/man.png","/assets/images/incorrect/rabbit.png","/assets/images/incorrect/woman.png"];let F=$(0),R=$(0);function us(){const t=document.getElementById("maru_batsu_correct");t.classList.contains("fadeInAndOut")||(F.value=y(0,B.length-1),t.addEventListener("animationend",()=>{console.log("removing class"),t.classList.remove("fadeInAndOut"),R.value=y(0,W.length-1)},!0),t.classList.add("fadeInAndOut"))}function ls(){const t=document.getElementById("maru_batsu_incorrect");t.classList.contains("fadeInAndOut")||(t.addEventListener("animationend",()=>{console.log("removing class"),t.classList.remove("fadeInAndOut"),R.value=y(0,W.length-1)},!0),t.classList.add("fadeInAndOut"))}const ds=A({name:"MaruBatsuDisplay",setup(t){return(e,s)=>(f(),b(L,null,[o("div",as,[o("img",{id:"maru_batsu_correct_img",src:B[m(F)]},null,8,rs)]),o("div",is,[o("img",{id:"maru_batsu_incorrect_img",src:W[m(R)]},null,8,cs)])],64))}});var ms=K(ds,[["__scopeId","data-v-055074a8"]]);const ps={class:"top",style:{flexWrap:"wrap"}},_s=["onClick"],hs=["src"],ws={class:"bottom-menu"},gs=o("div",null,"How many",-1),fs={class:"text"},bs=o("div",null,"?",-1),ys=["onSubmit"],vs=["max"],Ss=o("input",{type:"submit",value:"Check!"},null,-1),Ls=A({name:"HowManyApp",setup(t){const e=U(),s=O();e.addWordsFromURLSearchParams().then(()=>{s.setSettingsFromURLSearchParams(),s.randomize(e.words)});const u={1:"/assets/audio/numbers/1.mp3",2:"/assets/audio/numbers/2.mp3",3:"/assets/audio/numbers/3.mp3",4:"/assets/audio/numbers/4.mp3",5:"/assets/audio/numbers/5.mp3",6:"/assets/audio/numbers/6.mp3",7:"/assets/audio/numbers/7.mp3",8:"/assets/audio/numbers/8.mp3",9:"/assets/audio/numbers/9.mp3",10:"/assets/audio/numbers/10.mp3",11:"/assets/audio/numbers/11.mp3",12:"/assets/audio/numbers/12.mp3",13:"/assets/audio/numbers/13.mp3",14:"/assets/audio/numbers/14.mp3",15:"/assets/audio/numbers/15.mp3",16:"/assets/audio/numbers/16.mp3",17:"/assets/audio/numbers/17.mp3",18:"/assets/audio/numbers/18.mp3",19:"/assets/audio/numbers/19.mp3",20:"/assets/audio/numbers/20.mp3",30:"/assets/audio/numbers/30.mp3",40:"/assets/audio/numbers/40.mp3",50:"/assets/audio/numbers/50.mp3",60:"/assets/audio/numbers/60.mp3",70:"/assets/audio/numbers/70.mp3",80:"/assets/audio/numbers/80.mp3",90:"/assets/audio/numbers/90.mp3"};function r(){return e.getWordByIndex(s.howManyQuestion)}let n=0;function i(a){if(a.selected)return;const _=s.howManyQuestion;a.index==_?(a.selected=!0,new Audio("/assets/audio/sfx/correct.mp3").play(),n+=1,u[n]&&new Audio(u[n]).play()):new Audio("/assets/audio/sfx/incorrect.mp3").play()}function h(){const a=document.querySelector('input[name="answer"]'),_=Number.parseInt(a.value);s.checkAnswer(_)?(new Audio("/assets/audio/sfx/complete.mp3").play(),us(),setTimeout(()=>{a.value="",n=0,s.randomize(e.words)},2e3)):(new Audio("/assets/audio/sfx/incorrect.mp3").play(),ls())}return(a,_)=>{var d,w;return f(),b(L,null,[S(H),S(ns),S(ms),o("div",ps,[(f(!0),b(L,null,D(m(s).cells,(p,l)=>(f(),b("div",{class:"cell",key:l,style:x({height:`calc((100% / ${m(s).rows}))`,opacity:p.selected?.5:1,width:`calc((100% / ${m(s).cols}))`}),onClick:c=>i(p)},[o("img",{src:p.word.singular.image,style:x(p.style)},null,12,hs)],12,_s))),128))]),o("div",ws,[gs,o("div",{class:"card",style:x({backgroundImage:`url(${(d=r())==null?void 0:d.plural.image})`})},[o("span",fs,V((w=r())==null?void 0:w.plural.en),1)],4),bs,o("form",{class:"form",onSubmit:T(h,["prevent"])},[o("input",{type:"number",min:"0",name:"answer",placeholder:"__",required:"",max:m(s).cells.length},null,8,vs),Ss],40,ys)])],64)}}}),I=j(Ls);I.component(M.name,M);I.use(q());I.use(Q);I.mount("#app");
