import{br as M,a7 as A,s as U,aI as T,o as g,c as y,a5 as L,b3 as N,_ as n,B as h,bq as R,k as W,M as x,a4 as F,aG as z,H as v,I as H,a as V,b as B}from"./pinia.esm-browser.b39ed190.js";import{_ as Q,i as $,z as j}from"./QRToggle.2793eef2.js";import{u as k}from"./url.0afc5710.js";function I(t,s){return Math.floor(Math.random()*(s-t+1)+t)}function q(t,s,e=3){return parseFloat((Math.random()*(s-t)+t).toFixed(e))}function D(){const t=I(0,2*Math.PI),s=q(.5,1);return{transform:`rotate(${t}rad) scale(${s}) `,WebkitFilter:"drop-shadow(0 0 10px rgba(255, 255, 255, 5))",filter:"drop-shadow(0 0 10px rgba(255, 255, 255, 5))"}}const P=M({id:"how_many",state:()=>({cols:5,rows:5,cells:new Array,howManyQuestion:0}),actions:{checkAnswer(t){let s=0;for(const e of this.cells)this.howManyQuestion==e.index&&(s+=1);return s==t},randomize(t){const s=t.length;this.cells.splice(0,this.cells.length);for(let e=0;e<this.cols*this.rows;e++){const u=I(0,s-1);this.cells.push({index:u,selected:!1,style:D(),word:t[u]})}this.howManyQuestion=I(0,s-1)},setSettingsFromURLSearchParams(){const t=new URLSearchParams(window.location.search),s=t.get("rows");s&&(this.rows=Number.parseInt(s));const e=t.get("cols");e&&(this.cols=Number.parseInt(e))}}}),E="https://altivities.earthiverse.ca/wordlists/Plurals",O={General:{prefix:`${E}/`,lists:{fruits:{name:"Fruits",wordList:"fruits.json"}}}},C=M({id:"word_list",state:()=>({wordLists:new Array,numWords:0}),getters:{curatedWordLists:()=>O,getWordByIndex:t=>s=>{let e=0;for(const u of t.wordLists)for(const a of u){if(e==s)return a;e++}},words:t=>t.wordLists.flat()},actions:{async addWordsFromURLSearchParams(t="wordlist",s="wordlists",e="ignore",u="include"){const a=new URLSearchParams(window.location.search);let o=[];const i=a.get(t);if(i){const l=await(await fetch(i)).json();o.push(...l)}const w=a.get(s);if(w)for(const c of w.split(",")){const f=await(await fetch(c)).json();o.push(...f)}const r=a.get(e);if(r){const c=r.split(",");for(let l=0;l<o.length;l++){const f=o[l];for(const b of c)if(f.singular.en==b){o.splice(l,1),l-=1;break}}}const p=a.get(u);if(p){const c=p.split(","),l=[];for(;c.length>0;){const f=c.shift();for(const b of o)if(b.singular.en==f){l.push(b);break}}o=l}for(const c of o)c.id=this.numWords,this.numWords++;this.wordLists.push(o);let d=1,_=`${d}_wordlist`,m=`${d}_wordlists`;for(;a.has(_)||a.has(m);)this.addWordsFromURLSearchParams(_,m,`${d}_ignore`,`${d}_include`),d+=1,_=`${d}_wordlist`,m=`${d}_wordlists`;return this.words},resetStore(){this.wordLists.splice(0,this.wordLists.length),this.numWords=0}}});const G=["onSubmit"],K=F(" # Rows "),J=["value"],X=F(" # Columns "),Y=["value"],Z=n("input",{type:"submit",value:"Set"},null,-1),ss=A({name:"HowManySettingsToggle",setup(t){let s=U(!1);const e=P(),u=C();function a(){const o=Number.parseInt(document.querySelector('input[name="rows"]').value),i=Number.parseInt(document.querySelector('input[name="cols"]').value);e.rows=o,e.cols=i,k("rows",o.toString()),k("cols",i.toString()),e.randomize(u.words),s.value=!1}return(o,i)=>{const w=T("vue-final-modal");return g(),y(x,null,[L(w,{modelValue:h(s),"onUpdate:modelValue":i[0]||(i[0]=r=>W(s)?s.value=r:s=r),classes:"modal-container","content-class":"modal-content"},{default:N(()=>[n("form",{class:"how-many-settings-form",onSubmit:R(a,["prevent"]),name:"type"},[K,n("input",{type:"number",id:"rows",name:"rows",value:h(e).rows},null,8,J),X,n("input",{type:"number",id:"cols",name:"cols",value:h(e).cols},null,8,Y),Z],40,G)]),_:1},8,["modelValue"]),n("span",{class:"material-symbols-outlined top-button settings-button",onClick:i[1]||(i[1]=r=>W(s)?s.value=!0:s=!0)},"settings")],64)}}});const es={class:"top",style:{flexWrap:"wrap"}},ts=["onClick"],os=["src"],ns={class:"bottom-menu"},rs=n("div",null,"How many",-1),as={class:"text"},is=n("div",null,"?",-1),ls=["onSubmit"],us=["max"],cs=n("input",{type:"submit",value:"Check!"},null,-1),ds=A({name:"HowManyApp",setup(t){const s=C(),e=P();s.addWordsFromURLSearchParams().then(()=>{e.setSettingsFromURLSearchParams(),e.randomize(s.words)});const u={1:"/assets/audio/numbers/1.mp3",2:"/assets/audio/numbers/2.mp3",3:"/assets/audio/numbers/3.mp3",4:"/assets/audio/numbers/4.mp3",5:"/assets/audio/numbers/5.mp3",6:"/assets/audio/numbers/6.mp3",7:"/assets/audio/numbers/7.mp3",8:"/assets/audio/numbers/8.mp3",9:"/assets/audio/numbers/9.mp3",10:"/assets/audio/numbers/10.mp3",11:"/assets/audio/numbers/11.mp3",12:"/assets/audio/numbers/12.mp3",13:"/assets/audio/numbers/13.mp3",14:"/assets/audio/numbers/14.mp3",15:"/assets/audio/numbers/15.mp3",16:"/assets/audio/numbers/16.mp3",17:"/assets/audio/numbers/17.mp3",18:"/assets/audio/numbers/18.mp3",19:"/assets/audio/numbers/19.mp3",20:"/assets/audio/numbers/20.mp3"};function a(){return s.getWordByIndex(e.howManyQuestion)}let o=0;function i(r){if(r.selected)return;const p=e.howManyQuestion;r.index==p?(r.selected=!0,new Audio("/assets/audio/sfx/correct.mp3").play(),o+=1,u[o]&&new Audio(u[o]).play()):new Audio("/assets/audio/sfx/incorrect.mp3").play()}function w(){const r=document.querySelector('input[name="answer"]'),p=Number.parseInt(r.value);e.checkAnswer(p)?(alert("That's correct!"),r.value="",o=0,e.randomize(s.words)):alert("Sorry, that's wrong.")}return(r,p)=>{var d,_;return g(),y(x,null,[L(Q),L(ss),n("div",es,[(g(!0),y(x,null,z(h(e).cells,(m,c)=>(g(),y("div",{class:"cell",key:c,style:v({height:`calc((100% / ${h(e).rows}))`,opacity:m.selected?.5:1,width:`calc((100% / ${h(e).cols}))`}),onClick:l=>i(m)},[n("img",{src:m.word.singular.image,style:v(m.style)},null,12,os)],12,ts))),128))]),n("div",ns,[rs,n("div",{class:"card",style:v({backgroundImage:`url(${(d=a())==null?void 0:d.plural.image})`})},[n("span",as,H((_=a())==null?void 0:_.plural.en),1)],4),is,n("form",{class:"form",onSubmit:R(w,["prevent"])},[n("input",{type:"number",name:"answer",placeholder:"__",min:"0",max:h(e).cells.length},null,8,us),cs],40,ls)])],64)}}}),S=V(ds);S.component($.name,$);S.use(B());S.use(j);S.mount("#app");
